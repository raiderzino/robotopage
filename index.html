<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Песочница</title>
    <script src="https://cdn.jsdelivr.net/gh/webadb/webadb.js@master/webadb.js"></script>
</head>
<body>
    <textarea id="codeInput" rows="10" cols="50" placeholder="Введите ваш JavaScript код..."></textarea>
    <br>
    <button onclick="runCode()">Выполнить</button>
    <button onclick="showSystemInfo()">Показать информацию о системе</button>
    <button onclick="showAdbSystemInfo()">Показать информацию о системе через ADB</button>
    <a href="tel:+79145616691">+79145616691</a>
    <div id="output"></div>

    <script>
        function runCode() {
            const code = document.getElementById('codeInput').value;
            const output = document.getElementById('output');
            output.innerHTML = '';

            try {
                const result = new Function(code)();
                if (result !== undefined) {
                    output.innerHTML = String(result);
                }
            } catch (error) {
                output.innerHTML = 'Ошибка: ' + error.message;
            }
        }

        function showSystemInfo() {
            const output = document.getElementById('output');
            output.innerHTML = '';

            const systemInfo = `
                <strong>Информация о системе:</strong><br>
                Платформа: ${navigator.platform}<br>
                Операционная система: ${navigator.oscpu || 'Недоступно'}<br>
                Браузер: ${navigator.userAgent}<br>
                Язык браузера: ${navigator.language}<br>
                Разрешение экрана: ${window.screen.width}x${window.screen.height}<br>
                Цветовая глубина: ${window.screen.colorDepth} бит<br>
                Часовой пояс: ${Intl.DateTimeFormat().resolvedOptions().timeZone}<br>
                Дата и время: ${new Date().toLocaleString()}
            `;
            output.innerHTML = systemInfo;
        }

        async function showAdbSystemInfo() {
            const output = document.getElementById('output');
            output.innerHTML = 'Инициализация ADB...';

            try {
                // Инициализация WebUSB и подключение к устройству
                const webusb = await Adb.open("WebUSB");
                const adb = await webusb.connectAdb("host::");

                // Выполнение команды getprop для получения всей системной информации
                const shell = await adb.shell("getprop");
                const result = await shell.receive();

                // Вывод результата
                output.innerHTML = '<strong>Информация о системе через ADB (getprop):</strong><br><pre>' + result + '</pre>';
            } catch (error) {
                output.innerHTML = 'Ошибка при запуске ADB: ' + error.message + '<br>Убедитесь, что устройство подключено по USB, USB debugging включено, и браузер поддерживает WebUSB (например, Chrome).';
            }
        }
    </script>
</body>
</html>
